this is Antirez's Picol source mostly verbatim

only modification is freeing the interpreter at the end to make sure there are
no memory leaks (there aren't really)

